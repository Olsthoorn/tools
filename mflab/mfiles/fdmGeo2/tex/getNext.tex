\begin{alltt}
\textcolor{keyword}{function} [value,varargin] = getNext(varargin,type,default)
\textcolor{comment}{%GETPROP get property value from varargin if it has given type, if not present use default}
\textcolor{comment}{%}
\textcolor{comment}{% USAGE: [value,varargin] = getNext(varargin,type,default)}
\textcolor{comment}{%}
\textcolor{comment}{% if string propertyName is found in varargin\{:\}, the next value, i.e.}
\textcolor{comment}{% varargin\{i+1\} is transferred to the output and varargin(i:i+1) are}
\textcolor{comment}{% removed. If the propertyName does not exist in varargin, then varargin is}
\textcolor{comment}{% untouched, while value becomes default.}
\textcolor{comment}{%}
\textcolor{comment}{% TO 130328}

value = default;

\textcolor{keyword}{if} \~{}isempty(varargin)
    \textcolor{keyword}{if} strncmpi(type,class(varargin\{1\}),numel(type))
        value = varargin\{1\};
        varargin(1) = [];
    \textcolor{keyword}{end}
\textcolor{keyword}{end}
\end{alltt}
