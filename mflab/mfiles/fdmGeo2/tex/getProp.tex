\begin{alltt}
\textcolor{keyword}{function} [value,varargin] = getProp(varargin,propertyName,default)
\textcolor{comment}{%GETPROP get property value from varargin, if not present use default}
\textcolor{comment}{%}
\textcolor{comment}{% USAGE: [value,varargin] = getProp(varargin,propertyName,default)}
\textcolor{comment}{%}
\textcolor{comment}{% if string propertyName is found in varargin\{:\}, the next value, i.e.}
\textcolor{comment}{% varargin\{i+1\} is transferred to the output and varargin(i:i+1) are}
\textcolor{comment}{% removed. If the propertyName does not exist in varargin, then varargin is}
\textcolor{comment}{% untouched, while value becomes default.}
\textcolor{comment}{%}
\textcolor{comment}{% TO 130328}

value = default;

\textcolor{keyword}{if} \~{}isempty(varargin)
    i = find(strncmpi(propertyName,varargin,2));

    \textcolor{keyword}{if} \~{}isempty(i) \&\& numel(varargin)>i
        value = varargin\{i+1\};
        varargin(i:i+1) = [];
    \textcolor{keyword}{end}
\textcolor{keyword}{end}
\end{alltt}
